
#include "usart.h"
#include "stm32f10x_rcc.h"
#include "stm32f10x_gpio.h"
#include "stm32f10x_usart.h"

#define Usart1_GPIO GPIOA
#define Usart1_GPIO_TX_PIN GPIO_Pin_9
#define Usart1_GPIO_RX_PIN GPIO_Pin_10



void usart_init(uint32_t boundRate,UsartPortType usartPort) {
    GPIO_InitTypeDef GPIO_InitStruct;

    uint32_t usartTxPin;
    uint32_t usartRxPin;
    USART_TypeDef* USARTx;
    if(usartPort == Usart_1) {
        //使能GPIOA，Usart1时钟
        RCC_APB2PeriphClockCmd(RCC_APB2Periph_GPIOA|RCC_APB2Periph_USART1,ENABLE);
        usartTxPin = Usart1_GPIO_TX_PIN;
        usartRxPin = Usart1_GPIO_RX_PIN;

        USARTx = USART1;
    }
    //设置 GPIO
    GPIO_InitStruct.GPIO_Pin =Usart1_GPIO_TX_PIN;
    GPIO_InitStruct.GPIO_Mode = GPIO_Mode_AF_PP;          //推挽复用输出
    GPIO_InitStruct.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(Usart1_GPIO,&GPIO_InitStruct);

    GPIO_InitStruct.GPIO_Pin =Usart1_GPIO_RX_PIN;
    GPIO_InitStruct.GPIO_Mode = GPIO_Mode_IN_FLOATING;          //浮空输入
    GPIO_InitStruct.GPIO_Speed = GPIO_Speed_50MHz;
    GPIO_Init(Usart1_GPIO,&GPIO_InitStruct);

    USART_InitTypeDef usartInitDef;
		    USART_StructInit(&usartInitDef);
		usartInitDef.USART_BaudRate=boundRate;
		
    USART_ClockInitTypeDef usartClockDef;


		
		USART_ClockStructInit(&usartClockDef);
		
		
		
}